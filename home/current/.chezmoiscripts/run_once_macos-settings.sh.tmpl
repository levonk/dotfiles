#!/usr/bin/env zsh
# shellcheck shell=zsh
#{{ includeTemplate "dot_config/ai/templates/shell/executeable.zsh.tmpl" (dict "path" .path "name" .name) }}

# =====================================================================
# macOS-specific settings

{{- if eq .chezmoi.os "darwin" }}
echo "[macOS] Applying CLI-friendly defaults..."

# Central orchestrator script that configures extensive macOS defaults
# See: home/current/dot_local/bin/executable_osx-settings.py -> ~/.local/bin/osx-settings.py
OSX_SETTINGS="$HOME/.local/bin/osx-settings.py"
if [[ -x "$OSX_SETTINGS" ]]; then
  echo "[macOS] Running: $OSX_SETTINGS"
  "$OSX_SETTINGS" || echo "[macOS] Warning: $OSX_SETTINGS exited non-zero; continuing"
  
  # Restart UI services so settings take effect
  killall Finder 2>/dev/null || true
  killall Dock 2>/dev/null || true
  killall SystemUIServer 2>/dev/null || true
else
  echo "[macOS] Error: $OSX_SETTINGS not found or not executable"
  exit 1
fi
{{- else }}
echo "Skipping macOS settings - this script is intended for macOS only"
{{- end }}
