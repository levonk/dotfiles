# --- Path Warning for Executable Scripts (Zsh) ---
# Get the canonical absolute path of the script
SCRIPT_PATH="$(realpath "$0" 2>/dev/null || readlink -f "$0" 2>/dev/null || echo "$0")"

_IS_IN_EXPECTED_PATH=0

# Check if script is in ~/.local/bin/ (recursively)
if [[ "${SCRIPT_PATH}" == "${HOME}/.local/bin/"* ]]; then
  _IS_IN_EXPECTED_PATH=1
fi

# Allow scripts under /tmp during testing/runtime without advertising it as recommended
if [[ "${SCRIPT_PATH}" == /tmp/* ]]; then
  _IS_IN_EXPECTED_PATH=1
fi

# Check if script is in ${XDG_CONFIG_HOME:-$HOME/.config}/shells/**/utils/*.zsh
_XDG_CONFIG_HOME_DEFAULT="${HOME}/.config"
_CONFIG_BASE_DIR="${XDG_CONFIG_HOME:-${_XDG_CONFIG_HOME_DEFAULT}}/shells/"

# Using globbing for pattern matching in Zsh
if [[ "${SCRIPT_PATH}" == "${_CONFIG_BASE_DIR}"*/utils/*.zsh ]]; then
  _IS_IN_EXPECTED_PATH=1
fi
unset _XDG_CONFIG_HOME_DEFAULT _CONFIG_BASE_DIR

if (( _IS_IN_EXPECTED_PATH == 0 )); then
  echo "WARNING: This executable Zsh script is recommended to be in '${HOME}/.local/bin/' or '${XDG_CONFIG_HOME:-${HOME}/.config}/shells/**/utils/' for proper management and execution. Current path: '${SCRIPT_PATH}'" >&2
fi
unset _IS_IN_EXPECTED_PATH SCRIPT_PATH
