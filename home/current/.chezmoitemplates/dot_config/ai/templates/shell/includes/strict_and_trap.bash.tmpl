# Strict behavior: exit on error, treat unset variables as error, fail if any command in a pipeline fails, inherit ERR trap in functions
set -o errexit -o nounset -o pipefail -o errtrace

# Trap errors during sourcing
trap 'echo "ERROR: Sourcing failed at line $LINENO in '$SCRIPT'"; return 1 2>/dev/null || exit 1' ERR
