{{/*
Template: chezmoi-managed-header.md.tmpl
Include-only snippet; not a standalone document.
Purpose: Header for files managed by chezmoi. Signals that the file should not be edited directly.
Included by: `\{{ includeTemplate "dot_config/ai/rules/software-dev/meta/chezmoi-managed-header.md.tmpl" (dict "path" .path "name" .name) }}`
Params:
  style: optional explicit style override (none, raw, json, jsonc, shell, yaml, python, toml, ini, sql, lua, js, cstyle, markdown, html)
  path:  optional path/filename (e.g., foo.yaml.tmpl or foo.yaml) to infer style if style not provided
  name:  optional name/filename to infer style if style not provided
  year:  optional copyright year (defaults now)
  owner: optional rights holder text (defaults "All rights reserved.")
Notes:
  - Pure JSON doesn’t support comments. Use style "json" to emit a JSON member line
    (without braces or comma) you can place inside an object. For commented JSON use "jsonc".
  - Use style "none" for a no-op. Use style "raw" to emit plaintext lines without comment markers.
*/}}

{{- $year  := (index . "year")  | default (now | date "2006") -}}
{{- $owner := (index . "owner") | default "All rights reserved." -}}
{{- $style := (index . "style") -}}

{{- if not $style -}}
  {{- $raw := (index . "path") | default (index . "name") | default "" -}}
  {{- $name := regexReplaceAll "\\.tmpl$" $raw "" -}}        {{/* strip trailing .tmpl if present */}}
  {{- $lname := lower $name -}}

  {{/* pick style by extension or filename class */}}
  {{- if or (hasSuffix $lname ".sh") (hasSuffix $lname ".bash") (hasSuffix $lname ".zsh") (hasSuffix $lname ".env") -}}
    {{- $style = "shell" -}}
  {{- else if or (hasSuffix $lname ".yml") (hasSuffix $lname ".yaml") -}}
    {{- $style = "yaml" -}}
  {{- else if hasSuffix $lname ".py" -}}
    {{- $style = "python" -}}
  {{- else if or (hasSuffix $lname ".toml") -}}
    {{- $style = "toml" -}}
  {{- else if or (hasSuffix $lname ".ini") (hasSuffix $lname ".service") (hasSuffix $lname ".conf") -}}
    {{- $style = "ini" -}}
  {{- else if hasSuffix $lname ".sql" -}}
    {{- $style = "sql" -}}
  {{- else if or (hasSuffix $lname ".jsonc") -}}
    {{- $style = "jsonc" -}}
  {{- else if hasSuffix $lname ".json" -}}
    {{- $style = "json" -}} {{/* emit pure JSON member line; safe only if schema allows unknown keys */}}
  {{- else if or (hasSuffix $lname ".js") (hasSuffix $lname ".jsx") (hasSuffix $lname ".ts") (hasSuffix $lname ".tsx") -}}
    {{- $style = "js" -}}
  {{- else if hasSuffix $lname ".lua" -}}
    {{- $style = "lua" -}}
  {{- else if or (hasSuffix $lname ".java") (hasSuffix $lname ".c") (hasSuffix $lname ".h") (hasSuffix $lname ".hpp") (hasSuffix $lname ".cpp") (hasSuffix $lname ".cc") (hasSuffix $lname ".css") (hasSuffix $lname ".scss") -}}
    {{- $style = "cstyle" -}}
  {{- else if or (hasSuffix $lname ".md") (hasSuffix $lname ".mdx") -}}
    {{- $style = "markdown" -}}
  {{- else if or (hasSuffix $lname ".html") (hasSuffix $lname ".htm") (hasSuffix $lname ".xml") -}}
    {{- $style = "html" -}}
  {{- else -}}
    {{- $style = "markdown" -}}
  {{- end -}}
{{- end -}}

{{- $fname := regexReplaceAll "\\.tmpl$" ((index . "path") | default (index . "name") | default "") "") -}}

/* line-comment group */
{{- if eq $style "none" -}}
{{/* no-op */}}

{{- else if eq $style "raw" -}}
Managed by chezmoi. Do not edit this file directly; changes will be overwritten.
Copyright (c) {{ $year }}. {{ $owner }}
File: {{ $fname }}

{{- else if eq $style "json" -}}
"notice-to-reader": "Managed by chezmoi. Do not edit this file directly; changes will be overwritten. (file: {{ $fname }})"

{{- else if or (eq $style "shell") (eq $style "yaml") (eq $style "python") (eq $style "toml") (eq $style "ini") -}}
# Managed by chezmoi. Do not edit this file directly; changes will be overwritten.
# Copyright (c) {{ $year }}. {{ $owner }}
# This file is generated/managed via chezmoi templates. Update the source templates instead.
# See: https://www.chezmoi.io/
# File: {{ $fname }}

{{- else if or (eq $style "sql") (eq $style "lua") -}}
-- Managed by chezmoi. Do not edit this file directly; changes will be overwritten.
-- Copyright (c) {{ $year }}. {{ $owner }}
-- This file is generated/managed via chezmoi templates. Update the source templates instead.
-- See: https://www.chezmoi.io/
-- File: {{ $fname }}

{{- else if or (eq $style "jsonc") (eq $style "js") -}}
//
// Managed by chezmoi. Do not edit this file directly; changes will be overwritten.
// Copyright (c) {{ $year }}. {{ $owner }}
// This file is generated/managed via chezmoi templates. Update the source templates instead.
// See: https://www.chezmoi.io/
// File: {{ $fname }}
//

{{- else if eq $style "cstyle" -}}
/*
 * Managed by chezmoi. Do not edit this file directly; changes will be overwritten.
 * Copyright (c) {{ $year }}. {{ $owner }}
 * This file is generated/managed via chezmoi templates. Update the source templates instead.
 * See: https://www.chezmoi.io/
 * File: {{ $fname }}
 */

{{- else if or (eq $style "html") (eq $style "markdown") -}}
<!-- Managed by chezmoi. Do not edit this file directly; changes will be overwritten. -->
<!-- Copyright (c) {{ $year }}. {{ $owner }} -->
<!-- This file is generated/managed via chezmoi templates. Update the source templates instead. -->
<!-- See: https://www.chezmoi.io/ -->
<!-- File: {{ $fname }} -->

> Managed by chezmoi — do not edit this file directly.

{{- else -}}
# Managed by chezmoi. Do not edit this file directly; changes will be overwritten.
# Copyright (c) {{ $year }}. {{ $owner }}
# This file is generated/managed via chezmoi templates. Update the source templates instead.
# See: https://www.chezmoi.io/
# File: {{ $fname }}

{{- end }}
