# This file is managed by chezmoi (https://www.chezmoi.io/) and maintained at https://github.com/levonk/dotfiles

# Login-shell only debug toggles (moved from ~/.zshenv to avoid slowing non-interactive shells)
# Enable module load logging; prompts are disabled by default to keep login fast.
export DEBUG_MODULE_LOADING=${DEBUG_MODULE_LOADING:-1}
# Suppress prompts by default; opt-in by unsetting or setting prompt-specific toggles.
export NO_DEBUG_MODULE_LOADING_PROMPT=${NO_DEBUG_MODULE_LOADING_PROMPT:-1}
# Default prompt timeout (seconds) if prompts are enabled
export DEBUG_MODULE_LOADING_PROMPT_TIMEOUT=${DEBUG_MODULE_LOADING_PROMPT_TIMEOUT:-3}

# Debug markers for post-.zshenv stage
if [ -n "${DEBUG_MODULE_LOADING:-}" ]; then
  print -u2 -- "[DEBUG] Entering .zprofile (after .zshenv)"
  print -u2 -- "[DEBUG] DEBUG_MODULE_LOADING=${DEBUG_MODULE_LOADING}"
  print -u2 -- "[DEBUG] NO_DEBUG_MODULE_LOADING_PROMPT=${NO_DEBUG_MODULE_LOADING_PROMPT}"
  print -u2 -- "[DEBUG] DEBUG_MODULE_LOADING_PROMPT_TIMEOUT=${DEBUG_MODULE_LOADING_PROMPT_TIMEOUT}"
  print -u2 -- "[DEBUG] Completed .zprofile"
fi
