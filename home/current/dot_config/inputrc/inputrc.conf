# ============================================================================
# GNU Readline configuration (~/.inputrc or XDG: ~/.config/inputrc/inputrc)
# Managed by chezmoi | https://github.com/levonk/dotfiles
#
# Purpose: Consistent readline behavior across shells/programs using readline.
# Docs: https://www.gnu.org/software/bash/manual/html_node/Readline-Init-File.html
# Tip: Press Ctrl-V then a key to insert its literal sequence here.
# ============================================================================

# ----------------------------------------------------------------------------
# Editing mode and general behavior
# ----------------------------------------------------------------------------
set editing-mode vi                  # vi keybindings (zero-degradation)
# set editing-mode emacs             # alternative
set show-all-if-ambiguous on         # show completion list immediately
set completion-ignore-case on        # case-insensitive completion
set mark-symlinked-directories on    # indicate symlinks in completion
set page-completions off             # don't paginate completion listings
set bell-style none                  # no audible/visual bell
set enable-bracketed-paste on        # safe multi-line paste handling
set colored-stats on                 # colorize file types in completion
set colored-completion-prefix on     # colorize common prefix

  # Encoding and meta keys (UTF-8 friendly)
  set input-meta on
  set output-meta on
  set convert-meta off

  # Optional: show vi mode in prompt (requires newer Readline)
  # Uncomment to enable indicators in the prompt when switching modes
  # set show-mode-in-prompt on
  # set vi-ins-mode-string "[INS] "
  # set vi-cmd-mode-string "[CMD] "

# ----------------------------------------------------------------------------
# Smarter completion: use menu-complete on TAB (optional; preserves Shift-TAB)
# ----------------------------------------------------------------------------
"\t": menu-complete
"\e[Z": menu-complete-backward      # Shift-TAB

# ----------------------------------------------------------------------------
# History search by prefix with arrows and C-p/C-n
# ----------------------------------------------------------------------------
"\e[A": history-search-backward
"\e[B": history-search-forward
"\C-p": history-search-backward
"\C-n": history-search-forward

# ----------------------------------------------------------------------------
# Home/End and navigation keys across varied terminals
# ----------------------------------------------------------------------------
# Home/End (common variants)
"\eOH": beginning-of-line
"\eOF": end-of-line
"\e[H": beginning-of-line
"\e[F": end-of-line

# Page Up/Down â†’ search history
"\e[5~": history-search-backward
"\e[6~": history-search-forward

# Ctrl+Arrow for word-wise movement (various sequences)
"\e[1;5C": forward-word
"\e[1;5D": backward-word
"\e[5C": forward-word
"\e[5D": backward-word
"\e\e[C": forward-word
"\e\e[D": backward-word

# ----------------------------------------------------------------------------
# Bash-specific tweaks
# ----------------------------------------------------------------------------
$if Bash
  # prefer dotfiles in completions and treat hyphen/underscore as equivalent
  set match-hidden-files on
  set completion-map-case on
  # allow entering directories without appending '/'
  set skip-completed-text on
$endif
