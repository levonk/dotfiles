#!/usr/bin/env sh
# shellcheck shell=sh
# vim: set filetype=bash:
#{{ includeTemplate "meta/chezmoi-managed-header.md.tmpl" (dict "style" "shell") }}

# Prevent double-sourcing (hash-based, robust across call chains). Must be early.
{{ includeTemplate "dot_config/ai/templates/shell/2include_guard_fn.sh.tmpl" }}

# Provide a key for the include guard as an argument to `include_guard_once` {{ "{{" -}} .cursor {{- "}}" }}
include_guard_once
if [ "${INCLUDE_GUARD_ALREADY:-0}" = "1" ]; then return 0; fi
local recommended_paths="$HOME/.config/shells/shared/ $HOME/.secrets/ $HOME/.cache/dotfiles/"
{{ includeTemplate "dot_config/ai/templates/shell/includes/debug_module_loading_prompt.sh.tmpl" }}
{{ includeTemplate "dot_config/ai/templates/shell/includes/logging_helpers.sh.tmpl" }}

# --- Shell Type and Sourcing/Execution Checks ---
{{ includeTemplate "dot_config/ai/templates/shell/includes/sourceable_exec_guard.sh.tmpl" }}

{{ includeTemplate "dot_config/ai/templates/shell/includes/get_script_path.sh.tmpl" }}

# Fail if not sourced in Bash or Zsh (shared include)
{{ includeTemplate "dot_config/ai/templates/shell/includes/require_bash_or_zsh_sourced.tmpl" }}

# Expected location check (shared include)
{{ includeTemplate "dot_config/ai/templates/shell/includes/expected_location_check.sh.tmpl" }}

unset _EXECUTED_SCRIPT_PATH _SOURCED_SCRIPT_PATH # Clean up temporary variables

# Load reusable guard_env_var function (masked by default; supports nomask)
{{ includeTemplate "dot_config/ai/templates/shell/var_guard_fn.sh.tmpl" }}

################################################################################
# --- Script logic starts here ---
################################################################################
# Example: Add your zsh-specific functions and aliases below.

# Example uses: Guard and set variables (no-op if already equals default)
# {{ "{{" -}} .cursor {{- "}}" }}
guard_env_var MY_VAR "default value changeme"

# Cleanup: Restore original SHELLOPTS and HISTFILE if needed

################################################################################
# --- End of Script ---
################################################################################

# End of script.
