#!/usr/bin/env zsh
# shellcheck shell=zsh
#{{ includeTemplate "meta/chezmoi-managed-header.md.tmpl" (dict "style" "shell") }}

{{ includeTemplate "dot_config/ai/templates/shell/includes/min_version.zsh.tmpl" }}

# Prevent double-sourcing (hash-based, robust across call chains)
{{ includeTemplate "dot_config/ai/templates/shell/2include_guard_fn.sh.tmpl" }}

# Provide a key for the include guard as an argument to `include_guard_once` {{ "{{" -}} .cursor {{- "}}" }}
include_guard_once
if [ "${INCLUDE_GUARD_ALREADY:-0}" = "1" ]; then return 0; fi

{{ includeTemplate "dot_config/ai/templates/shell/includes/get_script_path.zsh.tmpl" }}

{{ includeTemplate "dot_config/ai/templates/shell/includes/executable_executable_bit_cleanup.tmpl" }}

# Fail if executed directly (i.e., not sourced)
{{ includeTemplate "dot_config/ai/templates/shell/includes/sourceable_exec_guard.zsh.tmpl" }}

{{ includeTemplate "dot_config/ai/templates/shell/includes/require_zsh_sourced.tmpl" }}

{{ includeTemplate "dot_config/ai/templates/shell/includes/strict_and_trap.zsh.tmpl" }}

{{ includeTemplate "dot_config/ai/templates/shell/includes/expected_location_check.zsh.tmpl" }}

# Load reusable guard_env_var function (masked by default; supports nomask)
{{ includeTemplate "dot_config/ai/templates/shell/var_guard_fn.sh.tmpl" }}

################################################################################
# --- Script logic starts here ---
################################################################################
# Example: Add your zsh-specific functions and aliases below.

# Example uses: Guard and set variables (no-op if already equals default)
# {{ "{{" -}} .cursor {{- "}}" }}
guard_env_var MY_VAR "default value changeme"

# Cleanup: Restore original SHELLOPTS and HISTFILE if needed

################################################################################
# --- End of Script ---
################################################################################

# End of script.
